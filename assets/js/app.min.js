"use strict";document.addEventListener("DOMContentLoaded",()=>{const e=new class{constructor(e,t){this.form=e,this.fields=t}initialize(){this.validateOnSubmit(),this.validateOnEntry()}validateOnSubmit(){this.form.addEventListener("submit",e=>{e.preventDefault(),this.fields.forEach(e=>{e=document.querySelector(`#${e}`);console.log(e),this.validateFields(e)})})}validateOnEntry(){this.fields.forEach(e=>{const t=document.querySelector(`#${e}`);t.addEventListener("input",e=>{this.validateFields(t)})})}validateFields(e){if(""===e.value.trim()?this.setStatus(e,"Поле не может быть пустым","error"):this.setStatus(e,null,"success"),"email"==e.type){const s=/\S+@\S+.\S+/;s.test(e.value)?this.setStatus(e,null,"success"):this.setStatus(e,"Пожалуйста, введите корректный e-mail адрес","error")}var t;"password_confirmation"===e.id&&(t=this.form.querySelector("#password"),""===e.value.trim()?this.setStatus(e,"Требуется подтверждение пароля","error"):e.value!=t.value?this.setStatus(e,"Пароль не совпадает","error"):this.setStatus(e,null,"success"))}setStatus(e,t,s){const r=e.parentElement.querySelector(".icon-success"),i=e.parentElement.querySelector(".icon-error"),a=e.parentElement.querySelector(".error-message");"success"===s&&(i&&i.classList.add("hidden"),a&&(a.innerText=""),r.classList.remove("hidden"),e.classList.remove("input-error")),"error"===s&&(r&&r.classList.add("hidden"),a.innerText=t,i.classList.remove("hidden"),e.classList.add("input-error"))}}(document.querySelector(".form"),["username","email","password","password_confirmation"]);e.initialize()});